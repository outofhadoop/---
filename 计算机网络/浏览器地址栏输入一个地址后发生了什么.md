## 解析url

* 检查是否是合法的url，如果是合法的，会分析使用的是什么协议、域名、端口号、query、hash等，并对不合规的内容进行转译，如中文字符；如果不合法，会把内容传给搜索引擎

* 缓存判断，浏览器会判断本地缓存是否可用，如果可用就复用缓存

* DNS解析，先检查DNS缓存，顺序为：浏览器缓存 -> 操作系统的缓存 -> 本地DNS解析器（可能是网络运营商或家庭自己部署的本地域名服务器）；如果没有缓存，本地DNS解析器就会向域名服务器查询，顺序为： 根域名服务器 -> 顶级域名服务器 -> 权限域名服务器

* MAC地址解析，当得到IP地址后，还需要知道目的主机的mac地址，通过使用本机的IP地址和子网掩码做相与的操作，可以知道目标机器是否和本机在同一个子网

* TCP三次握手，A 发送 SYN 给B，B收到后发送SYN+1 和ack给A，A发送ack+1给B，并带上数据。

* HTTPS握手，客户端向服务器发送一个ClientHello消息，这个消息带有支持的TLS/SSL版本，可选的加密方式，一个随机数，可选的压缩算法列表；服务端收到ClientHello消息，选择客户端提供的TSL/SSL最高版本，然后生成自己的随机数，向客户端发送ServerHello，包含选择的TSL/SSL版本，生成的随机数，服务器证书等；客户端收到ServerHello后，会**验证证书是否合法**，如果合法会生成一个随机数，用于后续通信；**协商加密算法**，客户端向服务器发送ClientKeyExchange，其中包含一个Pre-Master Secret，双方使用这个Pre-Master Secret生成Master Secret；**生成会话密钥**，使用主密钥生成用于加密通信的会话密钥；**完成握手**；

* 服务器返回数据，浏览器进行解析，会先根据html解析DOM树，然后根据css解析cssom树，遇到script标签，如果不是async 和 defer，就会立即阻塞渲染。

* TCP四次挥手


